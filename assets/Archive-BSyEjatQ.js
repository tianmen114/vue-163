import{d as w,o as C,m as _,l as D,c as p,a as n,b as t,t as d,F as u,r as m,e as M,w as S,f as b,g as x,h as A,i as a,_ as F}from"./index-Ppgo1Kjs.js";const N={class:"archive-page"},L={class:"container"},V={class:"subtitle"},B={key:0,class:"empty"},$={key:1,class:"timeline"},R={class:"year-anchor"},j={class:"anchor-label"},z={class:"month-section"},E={class:"month-anchor"},I={class:"anchor-label"},O={class:"posts"},P={class:"post-content"},T={class:"post-meta"},Y={class:"post-date"},q={key:0,class:"post-tags"},H=w({__name:"Archive",setup(J){C(async()=>{_.value.length===0&&await D()});const y=p(()=>_.value.length),v=p(()=>{const c=new Map;for(const i of _.value){const r=new Date(i.date),o=r.getFullYear().toString(),e=(r.getMonth()+1).toString().padStart(2,"0");c.has(o)||c.set(o,{year:o,months:new Map});const l=c.get(o),h=`${o}-${e}`;l.months.has(h)||l.months.set(h,[]),l.months.get(h).push(i)}const s=Array.from(c.entries()).map(([i,r])=>{const o=Array.from(r.months.entries()).map(([e,l])=>{l.sort((f,k)=>+new Date(k.date)-+new Date(f.date));const h=e.split("-")[1];return{key:e,month:h,items:l}});return o.sort((e,l)=>e.month<l.month?1:-1),{key:i,year:i,months:o}});return s.sort((i,r)=>i.year<r.year?1:-1),s});function g(c){return new Date(c).toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1})}return(c,s)=>{const i=x("RouterLink");return a(),n("div",N,[t("div",L,[s[4]||(s[4]=t("h1",null,"文章归档",-1)),t("p",V,"共 "+d(y.value)+" 篇文章",1),v.value.length===0?(a(),n("div",B,"暂无文章")):(a(),n("div",$,[s[3]||(s[3]=t("div",{class:"rope"},null,-1)),(a(!0),n(u,null,m(v.value,r=>(a(),n("div",{key:r.key,class:"timeline-item"},[t("div",R,[s[0]||(s[0]=t("div",{class:"anchor-dot large"},null,-1)),t("div",j,d(r.year)+"年",1)]),t("div",z,[(a(!0),n(u,null,m(r.months,o=>(a(),n("div",{key:o.key,class:"month-item"},[t("div",E,[s[1]||(s[1]=t("div",{class:"anchor-dot small"},null,-1)),t("div",I,d(o.month)+"月",1)]),t("div",O,[(a(!0),n(u,null,m(o.items,e=>(a(),n("div",{key:e.id,class:"post-item"},[s[2]||(s[2]=t("div",{class:"post-dot"},null,-1)),t("div",P,[M(i,{to:`/article/${e.id}`,class:"post-title"},{default:S(()=>[b(d(e.title),1)]),_:2},1032,["to"]),t("div",T,[t("span",Y,d(g(e.date)),1),e.tags?.length?(a(),n("span",q,[(a(!0),n(u,null,m(e.tags,l=>(a(),n("span",{key:l,class:"tag"},"#"+d(l),1))),128))])):A("",!0)])])]))),128))])]))),128))])]))),128))]))])])}}}),Q=F(H,[["__scopeId","data-v-f2c86372"]]);export{Q as default};
